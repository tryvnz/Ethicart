
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout Page</title>
    <link rel="icon" type="image/x-icon" href="images/ethicart.png">
    <link rel="stylesheet" href="index.css">
    <style>
        .checkout-container {
            display: flex;
            padding: 2rem;
            gap: 2rem;
        }
        
        .checkout-left, .checkout-right {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            flex: 1;
        }
        
        .add-address {
            color: #004d40;
            text-decoration: none;
        }
        
        .add-address:hover {
            text-decoration: underline;
        }
        
        .product-summary {
            margin-top: 1rem;
        }
        
        .product-item {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .product-image {
            background-color: transparent;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 5px;
        }
        
        .payment-methods {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .payment-methods img {
            width: 80px;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .payment-methods label {   
            display:flex;
            gap: 1rem;
        }
        
        form label {
            display: block;
            margin: 0.5rem 0 0.2rem;
            font-weight: bold;
        }
        
        form input {
            width: 100%;
            padding: 0.5rem;
            margin-bottom: 1rem;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        
        .pay-now {
            background-color: #0a8f18;
            color: white;
            padding: 0.7rem 1.5rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .pay-now:hover {
            background-color: #80cb9f;
        }
        
        .order-summary {
            margin-top: 2rem;
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .qr-code {
            display: none;
            margin-top: 1rem;
            text-align: center;
        }
        .qr-code img {
            max-width: 200px;
            height: auto;
        }
        .image{
            width: 70px;
        }
        .delete-item{
            background-color: red;
            color: white;
            font-weight: bold;
            padding: 0.7rem 1.5rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .delete-item:hover{
            background-color: #930606;
            color: #ccc;
        }

        .gotobank {
            background-color: orange;
            color: white;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        #user-details-form {
            display: flex;
            flex-direction: column;
            /* gap: 1rem; */
        }

        #user-details-form label {
            display: block;
            margin: 0.5rem 0 0.2rem;
            font-weight: bold;
        }

        #user-details-form input {
            width: 100%;
            padding: 0.5rem;
             border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1rem;
        }
    
    </style>
</head>
<body>
    <div class="main">
        <div class="navbar">
            <div class="icon">
                <img class="logo" alt="ethicart" src="images/ethicart.png">
            </div>
            <div class="menu">
                <ul>
                    <li><a href="index.html">HOME</a></li>
                    <li><a href="p_product.html">ALL PRODUCTS</a></li>
                    <li><a href="p_contact.html">CONTACT</a></li>
                </ul>
            </div>
            <div class="search">
                <input class="srch" type="search" name="" placeholder="Search...">
                <a href="#"> <button class="btn">Search</button></a>
            </div>
            <div class="cart">
                <a href="p_check.html"> <img class="i_cart" src="images/Cart.svg" alt="cart"></a>
            </div>
            <div class="log">
                <a href="index.html"> <button class="login">Login</button></a>
            </div>
        </div>
        <div class="checkout-container">
            <div class="checkout-left">
                <h2>User Details</h2>
                <form id="user-details-form">
                    <label for="user-name">Name</label>
                    <input type="text" id="user-name" placeholder="Enter your name" required>
            
                    <label for="user-phone">Phone Number</label>
                    <input type="tel" id="user-phone" placeholder="Enter your phone number" required>
            
                    <label for="user-email">Email</label>
                    <input type="email" id="user-email" placeholder="Enter your email address" required>
                </form>
                
            
                <h3>Ship to</h3>
                <a href="#" id="add-address" class="add-address">+ Add an address</a>
                <div id="address-container"></div>
                <br>
                <h3>Shipping method</h3>
                <p>Standard Express - <strong>RM 4.90</strong><br>Received in 5 days</p>
                <div class="product-summary">
                    <div class="product-item">
                        <div class="product-image" id="product-image">Product 1 image</div>
                        <div class="product-details">
                            <p id="product-price">Product 1 price</p>
                            <p>x 1</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="checkout-right">
                <h3>Payment Method</h3>
                <form id="payment-form">
                    <div class="payment-methods">
                        <label>
                            <input type="radio" name="payment" value="visa" checked>
                            <img src="images/visa.svg" alt="Visa">
                        </label>
                        <label>
                            <input type="radio" name="payment" value="touchngo">
                            <img src="images/tng.svg" alt="Touch 'n Go">
                        </label>
                        <label>
                            <input type="radio" name="payment" value="bank-transfer">
                            <img src="images/bank.svg" alt="Bank Transfer">
                        </label>
                    </div>
                    <div id="visa-form">
                        <label for="card-number">Card Number</label>
                        <input type="text" id="card-number" placeholder="Card Number" required>
                        <label for="expiration-date">Expiration Date</label>
                        <input type="text" id="expiration-date" placeholder="MM/YY" required>
                        <label for="cvc">CVC</label>
                        <input type="text" id="cvc" placeholder="CVC" required>
                        <label for="name-on-card">Name On Card</label>
                        <input type="text" id="name-on-card" placeholder="Name On Card" required>
                    </div>
                    <div id="bank-options" style="display: none;">
                        <select id="bank-list">
                            <option value="bank1">Bank Muamalat</option>
                            <option value="bank2">Bank Simpanan Nasional</option>
                            <option value="bank3">Bank Rakyat</option>
                            <option value="bank4">Maybank</option>
                            <option value="bank5">CIMB</option>
                            <option value="bank6">RHB</option>
                        </select>
                        <button type="button" class="gotobank" onclick="goToBank()">Go to Bank</button >
                    </div>
                    <div class="qr-code" id="qr-code">
                        <p>Scan the QR code to pay with Touch 'n Go:</p>
                        <img src="images/Tng qr.png" alt="Touch 'n Go QR Code">
                    </div>
                    <button type="submit" class="pay-now">Pay Now</button>
                </form>
            </div>
        </div>
        <div class="order-summary">
            <h3>Order Summary</h3>
            <br>
            <p>Subtotal: RM <span id="subtotal">***</span></p>
            <p>Shipping: RM <span id="shipping">4.90</span></p>
            <br>
            <h3><strong>Total: RM <span id="total">***</span></strong></h3>
            <br>
            <p>SST included, where applicable.</p>
        </div>
    </div>

    <script>
        // Dynamically change payment form
        const paymentMethods = document.querySelectorAll('input[name="payment"]');
        const visaForm = document.getElementById('visa-form');
        const bankOptions = document.getElementById('bank-options');
        const qrCode = document.getElementById('qr-code');

        paymentMethods.forEach(method => {
            method.addEventListener('change', () => {
                visaForm.style.display = method.value === 'visa' ? 'block' : 'none';
                bankOptions.style.display = method.value === 'bank-transfer' ? 'block' : 'none';
                qrCode.style.display = method.value === 'touchngo' ? 'block' : 'none';
            });
        });

        // Alert payment successful and clear form
        const paymentForm = document.getElementById('payment-form');
        paymentForm.addEventListener('submit', (e) => {
            e.preventDefault();
            alert('Payment Successful!');
            localStorage.clear();
            paymentForm.reset(); // Clear the form
            document.getElementById('address-container').innerHTML = ''; // Clear the address text area
            qrCode.style.display = 'none'; // Hide the QR code
            window.location.href = 'index.html';
        });

        // Display email
        const userEmail = document.getElementById('user-email');
        userEmail.textContent = 'user@example.com'; // Replace with logged-in user email

        // Add address
        const addAddress = document.getElementById('add-address');
        const addressContainer = document.getElementById('address-container');
        addAddress.addEventListener('click', (e) => {
            e.preventDefault();
            addressContainer.innerHTML = `
                <textarea placeholder="Enter your address" rows="4" style="width: 100%;"></textarea>
            `;
        });

        // Update order summary
        const subtotalElement = document.getElementById('subtotal');
        const totalElement = document.getElementById('total');
        const productPrice = 100; // Replace with dynamic price
        const shippingPrice = 4.90;

        subtotalElement.textContent = productPrice.toFixed(2);
        totalElement.textContent = (productPrice + shippingPrice).toFixed(2);

        // Go to bank website
        function goToBank() {
            const bankList = document.getElementById('bank-list');
            const selectedBank = bankList.value;
            if (selectedBank === 'bank1') {
                window.location.href = 'https://www.i-muamalat.com.my/rib/index.do;jsessionid=dINk6p-27UURvR8TIg6R_UG9n9iMkcU42GbG8s6I.RIB1:ibkServer2';
            } else if (selectedBank === 'bank2') {
                window.location.href = 'https://www.mybsn.com.my/mybsn/login/login.do';
            } else if (selectedBank === 'bank3') {
                window.location.href = 'https://www2.irakyat.com.my/personal/login/login.do?step1=';
            }
            else if (selectedBank === 'bank4') {
                window.location.href = 'https://www.maybank2u.com.my/mbb/m2u/common/M2ULogin.do?action=Login';
            }
            else if (selectedBank === 'bank5') {
                window.location.href = 'https://www.cimbclicks.com.my/clicks/#/';
            }
            else if (selectedBank === 'bank6') {
                window.location.href = 'https://onlinebanking.rhbgroup.com/my/login';
            }
        }
        
    document.addEventListener("DOMContentLoaded", () => {
        const productList = document.querySelector(".product-summary");
        const subtotalElement = document.getElementById("subtotal");
        const totalElement = document.getElementById("total");
        const shippingPrice = 4.90;

        // Function to display cart items
        function displayCartItems() {
            const cart = JSON.parse(localStorage.getItem("cartItems")) || [];
            productList.innerHTML = "";

            let subtotal = 0;

            cart.forEach(product => {
                const productElement = document.createElement("div");
                productElement.classList.add("product-item");
                productElement.innerHTML = `
                    <div class="product-image"><img class="test" src="${product.image}" alt="${product.name}"></div>
                    <div class="product-details">
                        <p>${product.name}</p>
                        <p class="price">RM${product.price}</p>
                    </div>
                `;
                productList.appendChild(productElement);
                subtotal += product.price;
            });

            subtotalElement.textContent = subtotal.toFixed(2);
            totalElement.textContent = (subtotal + shippingPrice).toFixed(2);
        }

        // Display cart items on page load
        displayCartItems();
    });

    document.addEventListener("DOMContentLoaded", () => {
        const productList = document.querySelector(".product-summary");
        const subtotalElement = document.getElementById("subtotal");
        const shippingElement = document.getElementById("shipping");
        const totalElement = document.getElementById("total");
        const shippingPrice = 4.90;
        const payNowButton = document.querySelector(".pay-now");
        const paymentForm = document.getElementById("payment-form");

        // Function to display cart items
        function displayCartItems() {
            const cart = JSON.parse(localStorage.getItem("cartItems")) || [];
            productList.innerHTML = "";

            let subtotal = 0;

            cart.forEach((product, index) => {
                const productElement = document.createElement("div");
                productElement.classList.add("product-item");
                productElement.innerHTML = `
                    <div class="product-image"><img class="image" src="${product.image}" alt="${product.name}"></div>
                    <div class="product-details">
                        <p>${product.name}</p>
                        <p class="price">RM${product.price}</p>
                        <button class="delete-item" data-index="${index}">Delete</button>
                    </div>
                `;
                productList.appendChild(productElement);
                subtotal += product.price;
            });

            // Handle empty cart
            if (cart.length === 0) {
                shippingElement.textContent = "0.00";
            } else {
                shippingElement.textContent = shippingPrice.toFixed(2);
            }

            subtotalElement.textContent = subtotal.toFixed(2);
            totalElement.textContent = (subtotal + parseFloat(shippingElement.textContent)).toFixed(2);

            // Add delete functionality
            document.querySelectorAll(".delete-item").forEach(button => {
                button.addEventListener("click", (e) => {
                    const index = e.target.dataset.index;
                    cart.splice(index, 1);
                    localStorage.setItem("cartItems", JSON.stringify(cart));
                    displayCartItems();
                });
            });
        }
        displayCartItems();


    });
    </script>
</body>
</html>